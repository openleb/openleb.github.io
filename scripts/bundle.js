!function(){"use strict";var t=React.createClass({displayName:"Card",render:function(){var t=this.props.legislator,e=t.email.trim().length>0?React.DOM.a({href:"mailto:"+t.email.trim()},"Email"):"",a=t.twitter.trim().length>0?React.DOM.a({href:t.twitter},"Twitter"):"",l=t.facebook.trim().length>0?React.DOM.a({href:t.facebook},"Facebook"):"",s=0==(l+a+e).length?"Not Available":"";return React.DOM.div({className:"card col-md-6"},React.DOM.h3(null,t.first_name+" "+t.last_name),React.DOM.ul(null,React.DOM.li(null,React.DOM.strong(null,"District:")," ",t.district||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Sect: "),t.sect||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Party: ")," ",t.party||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Phone: ")," ",t.phone||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Mobile: ")," ",t.mobile||"Not Available"),React.DOM.li(null,React.DOM.strong(null,"Social: ")," ",s,React.DOM.span(null,e," ",a," ",l))))}}),e=React.createClass({displayName:"Table",render:function(){var e=[];return this.props.legislators.forEach(function(a){var l=a.first_name+" "+a.last_name,s=!0;(-1===l.toLowerCase().indexOf(this.props.filterText.toLowerCase())||"All"!==this.props.district&&a.district!==this.props.district||"All"!==this.props.sect&&a.sect!==this.props.sect||"All"!==this.props.party&&a.party!==this.props.party)&&(s=s&&!1),this.props.social&&this.props.social.forEach(function(t){0===a[t].trim().length&&(s=s&&!1)}),s&&e.push(t({legislator:a}))}.bind(this)),React.DOM.div({className:"list col-md-12"},e)}}),a=React.createClass({displayName:"SearchBar",handleChange:function(){this.props.onUserInput(this.refs.filterTextInput.getDOMNode().value)},render:function(){return React.DOM.form({className:"searchBar col-md-12"},React.DOM.input({type:"text",id:"search",placeholder:"Search...",value:this.props.filterText,onChange:this.handleChange,ref:"filterTextInput"}))}}),l=React.createClass({displayName:"FilterBar",handleChange:function(t){return function(e,a,l){"social"!==t?this.props.onUserInput(t,a.selected):this.props.onUserInput(t,l)}.bind(this)},render:function(){var t=[],e=[],a=[];this.props.legislators.forEach(function(l){"All"!==this.props.district&&l.district!==this.props.district||"All"!==this.props.sect&&l.sect!==this.props.sect||"All"!==this.props.party&&l.party!==this.props.party||(-1===t.indexOf(l.district)&&t.push(l.district),-1===e.indexOf(l.sect)&&e.push(l.sect),-1===a.indexOf(l.party)&&a.push(l.party))}.bind(this));var l=t.map(function(t){return React.DOM.option({value:t},t)}),s=a.map(function(t){return React.DOM.option({value:t},t)}),i=e.map(function(t){return React.DOM.option({value:t},t)});return React.DOM.form({className:"filterBar col-md-12"},React.DOM.div({className:"selector col-md-3"},React.DOM.span(null,React.DOM.label(null,"Sect:"),Chosen({ref:"sectInput",width:"150px",value:this.props.sect,onChange:this.handleChange("sect")},React.DOM.option({value:"All"},"All"),i)," ")),React.DOM.div({className:"selector col-md-3"},React.DOM.span(null,React.DOM.label(null,"Party:"),Chosen({ref:"partyInput",width:"150px",value:this.props.party,onChange:this.handleChange("party")},React.DOM.option({value:"All"},"All"),s)," ")),React.DOM.div({className:"selector col-md-3"},React.DOM.span(null,React.DOM.label(null,"District:"),Chosen({ref:"districtInput",width:"150px",value:this.props.district,onChange:this.handleChange("district")},React.DOM.option({value:"All"},"All"),l))),React.DOM.div({className:"selector col-md-3"},React.DOM.span(null,React.DOM.label(null,"Social:"),Chosen({ref:"Social",multiple:!0,width:"150px",onChange:this.handleChange("social")},React.DOM.option({value:"facebook"},"Facebook"),React.DOM.option({value:"twitter"},"Twitter"),React.DOM.option({value:"email"},"Email")))))}}),s=React.createClass({displayName:"FilterableTable",componentDidMount:function(){$("#img").hide()},handleNewData:function(t){this.setState({legislators:t})},componentWillMount:function(){var t=this;$("#img").show(),$.ajax({url:this.props.url,dataType:"json"}).done(function(e){t.handleNewData(e)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})},getInitialState:function(){return{legislators:[],filterText:"",district:"All",sect:"All",party:"All",social:[]}},handleSearchInput:function(t){this.setState({filterText:t})},handleFilterInput:function(t,e){var a={};a[t]=e,this.setState(a)},render:function(){return React.DOM.div(null,a({onUserInput:this.handleSearchInput,filterText:this.state.filterText}),l({onUserInput:this.handleFilterInput,legislators:this.state.legislators,district:this.state.district,sect:this.state.sect,party:this.state.party}),e({legislators:this.state.legislators,filterText:this.state.filterText,district:this.state.district,social:this.state.social,sect:this.state.sect,party:this.state.party}))}});React.renderComponent(s({url:"http://api.nouwweb.pw/search?deputies_terms=2009"}),document.getElementById("content"))}(),$("#img").hide();